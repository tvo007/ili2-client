import React from "react";
import { useSelector } from "react-redux";
import { useParams } from "react-router-dom";
import useDialog from "../../hooks/useDialog";
import { selectCurrentUser } from "../auth/authSlice";
import ProjectSettingsDialog from "./ProjectSettingsDialog";
import { useGetProjectByIdQuery } from "./projectsSlice";

const ProjectHeader = () => {
  const { projectId } = useParams();
  const currentUser = useSelector(selectCurrentUser);

  const {
    data: project,
    isLoading,
    isSuccess,
    isError,
    error,
    isFetching,
  } = useGetProjectByIdQuery(projectId);
  const { handleOpenDialog, handleCloseDialog, isDialogOpen } = useDialog();

  const handleEditProjectSettingsButton = () => {
    handleOpenDialog();
  };

  const handleClose = () => {
    handleCloseDialog();
  };

  return (
    <section className="container px-4 py-8">
      {/**mx-auto */}
      <div className="flex flex-wrap -mx-3 items-center">
        <div className="w-full lg:w-1/2 flex items-center mb-5 lg:mb-0 px-3">
          <span className="inline-flex justify-center items-center w-16 h-16 mr-4 bg-indigo-500 rounded">
            {/* <svg
              className="h-7 w-7 text-white"
              viewBox="0 0 28 28"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M23.4506 4.60603C23.4408 4.59562 23.4379 4.58178 23.4277 4.5716C23.4175 4.56143 23.4034 4.55834 23.393 4.5485C20.899 2.06256 17.5213 0.666656 14 0.666656C10.4787 0.666656 7.10093 2.06256 4.60698 4.5485C4.59649 4.55834 4.58249 4.56135 4.57223 4.5716C4.56198 4.58186 4.55913 4.5956 4.54937 4.60603C2.69104 6.47326 1.42749 8.84913 0.918186 11.4338C0.408879 14.0185 0.676641 16.6961 1.68768 19.1287C2.69872 21.5614 4.40772 23.64 6.59899 25.1022C8.79026 26.5645 11.3656 27.3449 14 27.3449C16.6343 27.3449 19.2097 26.5645 21.4009 25.1022C23.5922 23.64 25.3012 21.5614 26.3123 19.1287C27.3233 16.6961 27.5911 14.0185 27.0817 11.4338C26.5724 8.84913 25.3089 6.47326 23.4506 4.60603V4.60603ZM13.9999 24.6667C12.4029 24.6661 10.8265 24.3063 9.38745 23.6139C7.94839 22.9215 6.68353 21.9142 5.68657 20.6667H11.0403C11.411 21.0858 11.8666 21.4214 12.3768 21.6513C12.8871 21.8811 13.4403 22 13.9999 22C14.5595 22 15.1127 21.8811 15.623 21.6513C16.1332 21.4214 16.5888 21.0858 16.9595 20.6667H22.3133C21.3163 21.9142 20.0515 22.9215 18.6124 23.6139C17.1733 24.3063 15.5969 24.6661 13.9999 24.6667V24.6667ZM12.6666 18C12.6666 17.7363 12.7448 17.4785 12.8913 17.2592C13.0378 17.04 13.246 16.8691 13.4897 16.7681C13.7333 16.6672 14.0014 16.6408 14.26 16.6923C14.5187 16.7437 14.7562 16.8707 14.9427 17.0572C15.1292 17.2437 15.2562 17.4812 15.3076 17.7399C15.3591 17.9985 15.3327 18.2666 15.2317 18.5102C15.1308 18.7539 14.9599 18.9621 14.7407 19.1086C14.5214 19.2551 14.2636 19.3333 13.9999 19.3333C13.6464 19.333 13.3075 19.1924 13.0575 18.9424C12.8075 18.6924 12.6669 18.3535 12.6666 18V18ZM23.8802 18.0028L23.8664 18H17.9999C17.9974 17.1755 17.7397 16.372 17.2622 15.6998C16.7847 15.0275 16.1109 14.5196 15.3332 14.2457V9.99999C15.3332 9.64637 15.1928 9.30723 14.9427 9.05718C14.6927 8.80713 14.3535 8.66666 13.9999 8.66666C13.6463 8.66666 13.3071 8.80713 13.0571 9.05718C12.807 9.30723 12.6666 9.64637 12.6666 9.99999V14.2457C11.8889 14.5196 11.2151 15.0275 10.7376 15.6998C10.2601 16.372 10.0024 17.1755 9.9999 18H4.13337L4.11961 18.0028C3.7728 17.1471 3.53956 16.2496 3.42585 15.3333H4.66657C5.02019 15.3333 5.35933 15.1928 5.60937 14.9428C5.85942 14.6927 5.9999 14.3536 5.9999 14C5.9999 13.6464 5.85942 13.3072 5.60937 13.0572C5.35933 12.8071 5.02019 12.6667 4.66657 12.6667H3.42585C3.6641 10.7714 4.40997 8.97575 5.58462 7.46947L6.45758 8.34244C6.58138 8.46624 6.72835 8.56444 6.8901 8.63144C7.05185 8.69844 7.22521 8.73292 7.40029 8.73292C7.57537 8.73292 7.74873 8.69844 7.91048 8.63144C8.07223 8.56444 8.2192 8.46623 8.343 8.34244C8.4668 8.21864 8.565 8.07167 8.632 7.90992C8.699 7.74817 8.73348 7.5748 8.73348 7.39972C8.73348 7.22465 8.69899 7.05128 8.63199 6.88953C8.56499 6.72778 8.46679 6.58081 8.34299 6.45702L7.47011 5.58414C8.97629 4.40987 10.7717 3.66421 12.6666 3.42594V4.66666C12.6666 5.02028 12.807 5.35942 13.0571 5.60946C13.3071 5.85951 13.6463 5.99999 13.9999 5.99999C14.3535 5.99999 14.6927 5.85951 14.9427 5.60946C15.1928 5.35942 15.3332 5.02028 15.3332 4.66666V3.42594C17.2281 3.66421 19.0235 4.40987 20.5297 5.58414L19.6568 6.45702C19.4068 6.70704 19.2663 7.04614 19.2663 7.39972C19.2663 7.75331 19.4068 8.09241 19.6568 8.34244C19.9068 8.59246 20.2459 8.73292 20.5995 8.73292C20.9531 8.73292 21.2922 8.59246 21.5422 8.34244L22.4152 7.46947C23.5898 8.97575 24.3357 10.7714 24.574 12.6667H23.3332C22.9796 12.6667 22.6405 12.8071 22.3904 13.0572C22.1404 13.3072 21.9999 13.6464 21.9999 14C21.9999 14.3536 22.1404 14.6927 22.3904 14.9428C22.6405 15.1928 22.9796 15.3333 23.3332 15.3333H24.574C24.4602 16.2496 24.227 17.1471 23.8802 18.0028V18.0028Z"
                fill="currentColor"
              ></path>
            </svg> */}
            <svg
              className="h-8 w-8 text-white"
              viewBox="0 0 21 21"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M17.6416 1.71669C17.0442 1.6138 16.4394 1.56084 15.8332 1.55835C13.7652 1.55666 11.7403 2.14966 9.99991 3.26669C8.25503 2.16433 6.23045 1.58588 4.16657 1.60002C3.56045 1.6025 2.95558 1.65546 2.35824 1.75835C2.16258 1.79209 1.98539 1.89457 1.85859 2.04735C1.73178 2.20013 1.66369 2.39316 1.66657 2.59169V12.5917C1.66479 12.7141 1.69001 12.8355 1.74045 12.9471C1.79089 13.0586 1.8653 13.1577 1.95839 13.2373C2.05147 13.3169 2.16096 13.3749 2.27904 13.4074C2.39712 13.4398 2.5209 13.4459 2.64157 13.425C3.83576 13.2183 5.05924 13.2526 6.23996 13.5259C7.42068 13.7993 8.53476 14.3061 9.51657 15.0167L9.61657 15.075H9.70824C9.80066 15.1135 9.89979 15.1334 9.99991 15.1334C10.1 15.1334 10.1992 15.1135 10.2916 15.075H10.3832L10.4832 15.0167C11.4582 14.2903 12.5691 13.767 13.75 13.4778C14.931 13.1887 16.158 13.1395 17.3582 13.3334C17.4789 13.3542 17.6027 13.3482 17.7208 13.3157C17.8389 13.2833 17.9483 13.2252 18.0414 13.1456C18.1345 13.0661 18.2089 12.967 18.2594 12.8554C18.3098 12.7438 18.335 12.6225 18.3332 12.5V2.50002C18.3246 2.31015 18.2512 2.12895 18.1254 1.98647C17.9996 1.84399 17.8289 1.7488 17.6416 1.71669ZM9.16657 12.7917C7.62481 11.9806 5.90867 11.5573 4.16657 11.5584C3.89157 11.5584 3.61657 11.5584 3.33324 11.5584V3.22502C3.61079 3.20902 3.88903 3.20902 4.16657 3.22502C5.9444 3.22306 7.68342 3.74476 9.16657 4.72502V12.7917ZM16.6666 11.5917C16.3832 11.5917 16.1082 11.5917 15.8332 11.5917C14.0911 11.5906 12.375 12.0139 10.8332 12.825V4.72502C12.3164 3.74476 14.0554 3.22306 15.8332 3.22502C16.1108 3.20902 16.389 3.20902 16.6666 3.22502V11.5917ZM17.6416 15.05C17.0442 14.9471 16.4394 14.8942 15.8332 14.8917C13.7652 14.89 11.7403 15.483 9.99991 16.6C8.2595 15.483 6.2346 14.89 4.16657 14.8917C3.56045 14.8942 2.95558 14.9471 2.35824 15.05C2.24976 15.0672 2.14576 15.1057 2.05221 15.1633C1.95866 15.2208 1.87741 15.2963 1.81313 15.3854C1.74885 15.4744 1.70281 15.5753 1.67766 15.6822C1.65251 15.7891 1.64874 15.9 1.66657 16.0084C1.70892 16.2248 1.83532 16.4156 2.01807 16.539C2.20082 16.6623 2.42502 16.7083 2.64157 16.6667C3.83576 16.4599 5.05924 16.4942 6.23996 16.7676C7.42068 17.0409 8.53476 17.5478 9.51657 18.2584C9.65771 18.3588 9.82665 18.4128 9.99991 18.4128C10.1732 18.4128 10.3421 18.3588 10.4832 18.2584C11.4651 17.5478 12.5791 17.0409 13.7599 16.7676C14.9406 16.4942 16.1641 16.4599 17.3582 16.6667C17.5748 16.7083 17.799 16.6623 17.9817 16.539C18.1645 16.4156 18.2909 16.2248 18.3332 16.0084C18.3511 15.9 18.3473 15.7891 18.3222 15.6822C18.297 15.5753 18.251 15.4744 18.1867 15.3854C18.1224 15.2963 18.0412 15.2208 17.9476 15.1633C17.8541 15.1057 17.7501 15.0672 17.6416 15.05Z"
                fill="currentColor"
              ></path>
            </svg>
          </span>
          <div>
            <h2 className="mb-1 text-2xl font-bold">{project?.name}</h2>
            <p className="text-sm text-gray-500 font-medium">{project?.desc}</p>
          </div>
        </div>
        <div className="w-full lg:w-auto ml-auto px-3">
          <button
            className="inline-flex items-center py-2 px-3 mr-3 text-xs text-indigo-500 font-medium bg-white hover:bg-indigo-50 rounded"
            onClick={handleEditProjectSettingsButton}
          >
            <span className="inline-block mr-1">
              <svg
                width="14"
                height="14"
                viewBox="0 0 14 14"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M13.2133 5.36665L11.9533 4.94665L12.5466 3.75998C12.6067 3.63577 12.6269 3.49596 12.6042 3.35983C12.5815 3.2237 12.5171 3.09797 12.4199 2.99998L10.9999 1.57998C10.9014 1.48137 10.7745 1.41612 10.637 1.3934C10.4994 1.37068 10.3582 1.39163 10.2333 1.45332L9.04659 2.04665L8.62659 0.786649C8.58223 0.65531 8.49803 0.541066 8.38572 0.459814C8.2734 0.378562 8.13854 0.334345 7.99992 0.333315H5.99992C5.86016 0.332954 5.72382 0.376528 5.61017 0.457877C5.49652 0.539225 5.41131 0.654235 5.36659 0.786649L4.94659 2.04665L3.75992 1.45332C3.63571 1.39317 3.4959 1.37305 3.35977 1.39574C3.22364 1.41843 3.09791 1.4828 2.99992 1.57998L1.57992 2.99998C1.48131 3.09849 1.41606 3.22543 1.39334 3.36295C1.37062 3.50047 1.39157 3.64166 1.45325 3.76665L2.04659 4.95332L0.786588 5.37332C0.655249 5.41767 0.541005 5.50187 0.459753 5.61419C0.378501 5.72651 0.334284 5.86136 0.333254 5.99998V7.99998C0.332893 8.13974 0.376467 8.27609 0.457815 8.38973C0.539164 8.50338 0.654174 8.58859 0.786588 8.63332L2.04659 9.05332L1.45325 10.24C1.39311 10.3642 1.37299 10.504 1.39568 10.6401C1.41837 10.7763 1.48274 10.902 1.57992 11L2.99992 12.42C3.09843 12.5186 3.22537 12.5838 3.36289 12.6066C3.50041 12.6293 3.64159 12.6083 3.76659 12.5466L4.95325 11.9533L5.37325 13.2133C5.41798 13.3457 5.50319 13.4607 5.61684 13.5421C5.73048 13.6234 5.86683 13.667 6.00659 13.6666H8.00659C8.14635 13.667 8.28269 13.6234 8.39634 13.5421C8.50999 13.4607 8.5952 13.3457 8.63992 13.2133L9.05992 11.9533L10.2466 12.5466C10.37 12.6053 10.5085 12.6246 10.6432 12.6019C10.7779 12.5793 10.9025 12.5157 10.9999 12.42L12.4199 11C12.5185 10.9015 12.5838 10.7745 12.6065 10.637C12.6292 10.4995 12.6083 10.3583 12.5466 10.2333L11.9533 9.04665L13.2133 8.62665C13.3446 8.58229 13.4588 8.4981 13.5401 8.38578C13.6213 8.27346 13.6656 8.1386 13.6666 7.99998V5.99998C13.6669 5.86022 13.6234 5.72388 13.542 5.61023C13.4607 5.49658 13.3457 5.41137 13.2133 5.36665ZM12.3333 7.51998L11.5333 7.78665C11.3493 7.84632 11.1805 7.9453 11.0386 8.07672C10.8967 8.20813 10.7851 8.36884 10.7116 8.5477C10.638 8.72656 10.6042 8.91928 10.6126 9.1125C10.6209 9.30572 10.6712 9.49481 10.7599 9.66665L11.1399 10.4266L10.4066 11.16L9.66659 10.76C9.49562 10.6748 9.30836 10.6274 9.11746 10.6208C8.92657 10.6143 8.7365 10.6489 8.56013 10.7222C8.38376 10.7956 8.22521 10.9059 8.0952 11.0459C7.96519 11.1858 7.86677 11.352 7.80659 11.5333L7.53992 12.3333H6.47992L6.21325 11.5333C6.15358 11.3494 6.0546 11.1806 5.92319 11.0387C5.79177 10.8968 5.63106 10.7852 5.4522 10.7116C5.27334 10.638 5.08062 10.6043 4.8874 10.6126C4.69419 10.621 4.5051 10.6713 4.33325 10.76L3.57325 11.14L2.83992 10.4066L3.23992 9.66665C3.32865 9.49481 3.37893 9.30572 3.38728 9.1125C3.39564 8.91928 3.36185 8.72656 3.28828 8.5477C3.21471 8.36884 3.10311 8.20813 2.96122 8.07672C2.81933 7.9453 2.65055 7.84632 2.46659 7.78665L1.66659 7.51998V6.47998L2.46659 6.21331C2.65055 6.15364 2.81933 6.05467 2.96122 5.92325C3.10311 5.79183 3.21471 5.63112 3.28828 5.45226C3.36185 5.2734 3.39564 5.08068 3.38728 4.88746C3.37893 4.69425 3.32865 4.50516 3.23992 4.33332L2.85992 3.59332L3.59325 2.85998L4.33325 3.23998C4.5051 3.32871 4.69419 3.379 4.8874 3.38735C5.08062 3.3957 5.27334 3.36191 5.4522 3.28834C5.63106 3.21477 5.79177 3.10317 5.92319 2.96128C6.0546 2.81939 6.15358 2.65061 6.21325 2.46665L6.47992 1.66665H7.51992L7.78659 2.46665C7.84626 2.65061 7.94524 2.81939 8.07665 2.96128C8.20807 3.10317 8.36878 3.21477 8.54764 3.28834C8.7265 3.36191 8.91922 3.3957 9.11244 3.38735C9.30566 3.379 9.49474 3.32871 9.66659 3.23998L10.4266 2.85998L11.1599 3.59332L10.7599 4.33332C10.6747 4.50428 10.6273 4.69155 10.6208 4.88244C10.6143 5.07334 10.6489 5.2634 10.7222 5.43977C10.7955 5.61614 10.9059 5.77469 11.0458 5.9047C11.1857 6.03471 11.352 6.13314 11.5333 6.19332L12.3333 6.45998V7.51998ZM6.99992 4.33332C6.4725 4.33332 5.95693 4.48971 5.5184 4.78273C5.07987 5.07575 4.73808 5.49222 4.53624 5.97949C4.33441 6.46676 4.2816 7.00294 4.38449 7.52022C4.48739 8.03751 4.74136 8.51266 5.1143 8.8856C5.48724 9.25854 5.9624 9.51252 6.47968 9.61541C6.99696 9.7183 7.53314 9.66549 8.02041 9.46366C8.50768 9.26183 8.92416 8.92003 9.21717 8.4815C9.51019 8.04297 9.66659 7.5274 9.66659 6.99998C9.66659 6.29274 9.38564 5.61446 8.88554 5.11436C8.38544 4.61427 7.70716 4.33332 6.99992 4.33332V4.33332ZM6.99992 8.33332C6.73621 8.33332 6.47843 8.25512 6.25916 8.10861C6.03989 7.9621 5.869 7.75386 5.76808 7.51023C5.66716 7.26659 5.64076 6.9985 5.69221 6.73986C5.74365 6.48122 5.87064 6.24364 6.05711 6.05717C6.24358 5.8707 6.48116 5.74371 6.7398 5.69227C6.99844 5.64082 7.26653 5.66723 7.51017 5.76814C7.7538 5.86906 7.96204 6.03996 8.10855 6.25922C8.25506 6.47849 8.33325 6.73627 8.33325 6.99998C8.33325 7.3536 8.19278 7.69274 7.94273 7.94279C7.69268 8.19284 7.35354 8.33332 6.99992 8.33332Z"
                  fill="#8880EB"
                ></path>
              </svg>
            </span>
            <span>Settings</span>
          </button>
        </div>
      </div>
      <ProjectSettingsDialog
        currentProjectId={projectId}
        isDialogOpen={isDialogOpen}
        handleCloseDialog={handleClose}
      />
    </section>
  );
};

export default ProjectHeader;

// const bruh = () => (
//   <section classNameName="min-h-[10vh]">
//     {/* <h2>Project Header</h2> */}
//     <div classNameName="container px-8 mx-auto">
//       <div classNameName="flex flex-wrap -m-4">
//         <div>{isLoading && "Loading"}</div>
//         <div>
//           <span classNameName="text-lg font-semibold">
//             {isSuccess && project.name}
//           </span>
//         </div>
//       </div>
//     </div>
//   </section>
// );
